<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Crimson+Pro:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap" rel="stylesheet"><title>Introdução a state charts em aplicações web</title><link rel="canonical" href="https://dielduarte.dev/blog/pt-br/introducao-a-state-charts-em-aplicacoes-web/"><meta name="description" content="Era uma vez um Front-end que não conhecia State Chartse e tinha uma tarefa muito &#34;simples&#34;..."><meta name="robots" content="index, follow"><meta property="og:title" content="Introdução a state charts em aplicações web"><meta property="og:type" content="article"><meta property="og:image" content="https://dielduarte.dev/images/pt-br-introducao-a-state-charts-em-aplicacoes-web.png"><meta property="og:url" content="https://dielduarte.dev/blog/pt-br/introducao-a-state-charts-em-aplicacoes-web/"><meta content="https://dielduarte.dev/images/pt-br-introducao-a-state-charts-em-aplicacoes-web.png" name="twitter:image"><meta content="Introdução a state charts em aplicações web" name="twitter:title"><meta content="@diel_duarte" name="twitter:site"><meta content="summary_large_image" name="twitter:card"><meta content="Era uma vez um Front-end que não conhecia State Chartse e tinha uma tarefa muito &#34;simples&#34;..." name="twitter:description"><link rel="stylesheet" href="/lang.7b5abac6.css" />
<style type="text/css">html{scroll-behavior:smooth}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.noise-overlay:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;opacity:.025;pointer-events:none;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");z-index:100}.prose-article{font-family:Crimson Pro,Georgia,serif;font-size:1.25rem;line-height:1.75;color:#3d3d3b}@media (prefers-color-scheme: dark){.prose-article{color:#e0e0e0}}.prose-article p{margin:1.75rem 0}.prose-article strong{color:#1f1f1d;font-weight:600}@media (prefers-color-scheme: dark){.prose-article strong{color:#fafaf8}}.prose-article a{color:#7d6e5e;text-decoration:none;background-image:linear-gradient(currentColor,currentColor);background-size:0% 1px;background-position:0 100%;background-repeat:no-repeat;transition:background-size .3s ease}@media (prefers-color-scheme: dark){.prose-article a{color:#b8a99a}}.prose-article a:hover{background-size:100% 1px}.prose-article h2{font-family:Plus Jakarta Sans,sans-serif;font-size:1.75rem;font-weight:700;color:#171715;margin:3rem 0 1.5rem;letter-spacing:-.02em}@media (prefers-color-scheme: dark){.prose-article h2{color:#fafaf8}}.prose-article h3{font-family:Plus Jakarta Sans,sans-serif;font-size:1.375rem;font-weight:600;color:#1f1f1d;margin:2.5rem 0 1rem}@media (prefers-color-scheme: dark){.prose-article h3{color:#f5f5f2}}.prose-article h4{font-family:Plus Jakarta Sans,sans-serif;font-size:1.125rem;font-weight:600;color:#1f1f1d;margin:2rem 0 .75rem}@media (prefers-color-scheme: dark){.prose-article h4{color:#f5f5f2}}.prose-article pre{font-family:JetBrains Mono,monospace;font-size:.9rem;padding:1.5rem;border-radius:8px;margin:2rem 0;overflow-x:auto;background:#171715!important;border:1px solid #2A2A28}.prose-article code{font-family:JetBrains Mono,monospace;font-size:.875em}.prose-article :not(pre)>code{background:rgba(125,110,94,.1);color:#635850;padding:.2em .4em;border-radius:4px}@media (prefers-color-scheme: dark){.prose-article :not(pre)>code{background:rgba(184,169,154,.15);color:#b8a99a}}.prose-article ul,.prose-article ol{margin:1.5rem 0;padding-left:0;list-style:none}.prose-article ul li,.prose-article ol li{position:relative;padding-left:1.75rem;margin-bottom:.75rem}.prose-article ul li:before{content:"";position:absolute;left:0;top:.75em;width:5px;height:5px;background:#7D6E5E;border-radius:50%}@media (prefers-color-scheme: dark){.prose-article ul li:before{background:#9A8B7A}}.prose-article ol{counter-reset:list-counter}.prose-article ol li{counter-increment:list-counter}.prose-article ol li:before{content:counter(list-counter);position:absolute;left:0;font-family:Plus Jakarta Sans,sans-serif;font-weight:600;font-size:.875rem;color:#7d6e5e}@media (prefers-color-scheme: dark){.prose-article ol li:before{color:#9a8b7a}}.prose-article blockquote{margin:2.5rem 0;padding:1.5rem 2rem;background:rgba(125,110,94,.05);border-left:3px solid #9A8B7A;border-radius:0 8px 8px 0;font-style:italic}@media (prefers-color-scheme: dark){.prose-article blockquote{background:rgba(184,169,154,.05);border-left-color:#7d6e5e}}.prose-article blockquote p{margin:0;color:#5c5c5a}@media (prefers-color-scheme: dark){.prose-article blockquote p{color:#b8b8b5}}.prose-article img,.prose-article video{max-width:100%;border-radius:8px;margin:2.5rem auto;display:block}.prose-article hr{border:none;height:1px;background:linear-gradient(90deg,transparent,#DCDCD7,transparent);margin:3rem 0}@media (prefers-color-scheme: dark){.prose-article hr{background:linear-gradient(90deg,transparent,#2A2A28,transparent)}}.reading-progress{position:fixed;top:0;left:0;height:2px;background:#7D6E5E;z-index:1000;transition:width .1s ease-out}@media (prefers-color-scheme: dark){.reading-progress{background:#9A8B7A}}
</style><script type="module" src="/_astro/hoisted.00e308b0.js"></script></head><body class="noise-overlay bg-ivory-100 dark:bg-ink-900 min-h-screen transition-colors duration-300"><!-- Reading progress bar --><div class="reading-progress" id="progress-bar" style="width: 0%"></div><div class="max-w-3xl mx-auto px-6 md:px-8 py-12 md:py-20"><!-- Back navigation --><nav class="mb-12"><a href="/pt-br/" class="inline-flex items-center gap-2 text-sm text-ink-400 dark:text-ivory-400 hover:text-ink-700 dark:hover:text-ivory-100 transition-colors duration-200 group"><svg class="w-4 h-4 transform group-hover:-translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>Voltar para artigos</a></nav><!-- Article Header --><header class="mb-12 md:mb-16"><!-- Meta info --><div class="flex flex-wrap items-center gap-4 mb-6"><time datetime="2020-11-01" class="text-sm font-mono text-accent-500 dark:text-accent-400">October 31, 2020</time><span class="text-ink-300 dark:text-ink-600">·</span><span class="text-sm text-ink-400 dark:text-ivory-400 font-mono">8 min de leitura</span></div><!-- Title --><h1 class="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-ink-800 dark:text-ivory-100 leading-tight tracking-tight mb-6">Introdução a state charts em aplicações web</h1><!-- Description --><p class="text-lg md:text-xl text-ink-500 dark:text-ivory-300 leading-relaxed">Era uma vez um Front-end que não conhecia State Chartse e tinha uma tarefa muito &quot;simples&quot;...</p><!-- Decorative divider --><div class="mt-10 flex items-center gap-3"><div class="w-12 h-px bg-accent-400 dark:bg-accent-500"></div><div class="w-1.5 h-1.5 bg-accent-400 dark:bg-accent-500 rounded-full"></div></div></header><!-- Article Content --><article class="prose-article"><p>Era uma vez um Front-end que não conhecia State Charts e tinha uma tarefa muito "simples", construir um componente de input. O  "simples" input para edição de um nome tinha algumas variações de estados:</p>
<p><code>inicial</code>: O input aparece desabilitado, o usuário pode então clicar no ícone de editar.</p>
<p><code>editando</code>: O input está habilitado para receber o novo valor de nome, o usuário pode então clicar no ícone de salvar.</p>
<p><code>salvando</code>: No lugar dos ícones de editar/salvar mostramos um loading sinalizando que alguma ação assíncrona está acontecendo, nesse caso, estamos salvando o novo valor de nome.</p>
<p><img src="/images/web-development-with-state-charts-intro/image-1.jpeg" alt="imagem mostrando o component de input e seus estados."></p>
<h2 class="subtitle--separator"></h2>
<p>Nosso querido Front-end começou a implementação com duas variáveis boleanas:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span></span>
<span class="line"><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span></span></code></pre>
<p>E uma função de <em><strong>onClick</strong></em> que recebia por parametro os valores de <code>isEditing</code> e <code>isSaving</code>.  Seu pensamento foi: A primeira vez que a função de onClick for chamada, estamos no estado inicial, logo preciso enviar o usuário para o estado de <em><strong>editando</strong></em>:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">onClick</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">isEditing</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">isSaving</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&#x26;&#x26;</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true;</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p><img src="/images/web-development-with-state-charts-intro/image-2.jpeg" alt="imagem mostrando o component de input em seu estado inicial e mostrando que o ícone editar possui um evento de on click."></p>
<p>Ao chegar no estado de edição e sabendo que o usuário poderia novamente clicar no ícone que dessa vez se transformava no ícone para salvar, o mesmo continuou sua implementação adicionando mais um trecho código na função de <em><strong>onClick</strong></em>:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">onClick</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">isEditing</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">isSaving</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&#x26;&#x26;</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true;</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">saveName</span><span style="color: #D8DEE9FF">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">then</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">       </span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">       </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>O trecho de código adicionado primeiro testa se o usuário está no estado de <em><strong>edição</strong></em>, caso verdadeiro, faz o switch das variáveis para levar o usuário para o estado de <em><strong>salvando</strong></em>, e logo em seguida faz um request na api para salvar o novo valor de nome. Ao receber um retorno da api, resetamos as duas variáveis boleanas para false, pois agora, o usuário não está editando e nem salvando um novo valor, o que supostamente levaria o usuário para o estado <em><strong>inicial</strong></em>.</p>
<p><img src="/images/web-development-with-state-charts-intro/image-3.png" alt="imagem mostrando o component de input saindo do esado de editando para salvando, e depois de salvando para inicial."></p>
<p>Não muito confiante na solução, deu a task como terminada e seguiu sua vida.</p>
<p><img src="/images/web-development-with-state-charts-intro/gif-1.gif" alt="gif de um menino nerd dando joinha."></p>
<h2 class="subtitle--separator"></h2>
<p>...Era uma vez um designer, que esqueceu de trabalhar no estado de erro do "simples" componente de input.</p>
<p><em><strong>“Hey dev, Esqueci de um detalhe, não tratamos o estado de erro do input. Quando der erro, volta pro estado de edição por que o cliente pode tentar salvar novamente.”</strong></em></p>
<p>Mesmo sabendo que a solução atual não era a ideal, continuou com a mesma implementação para adicionar o estado de erro, agora, ao invés de 2 variáveis boleanas, seriam três:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span></span>
<span class="line"><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span></span>
<span class="line"><span style="color: #D8DEE9">isError</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span></span></code></pre>
<p>Essa pequena adição resultou na função de onClick abaixo:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">onClick</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">isEditing</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">isSaving</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">isError</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&#x26;&#x26;</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true;</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">isError</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">saveName</span><span style="color: #D8DEE9FF">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">then</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">       </span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">       </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">catch</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">       </span><span style="color: #D8DEE9">isError</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true;</span></span>
<span class="line"><span style="color: #D8DEE9FF">       </span><span style="color: #D8DEE9">isSaving</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">       </span><span style="color: #D8DEE9">isEditing</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>Task concluida novamente.
Desconfortável com a solução final, foi pesquisar. Afinal, qual o problema com variáveis boleanas?</p>
<p><img src="/images/web-development-with-state-charts-intro/image-4.png" alt="imagem mostrando que podemos ter 8 variações usando 3 variáveis booleanas."></p>
<p>O problema é que como na imagem acima, apesar de parecer inofensiva e óbvio, 1 variável boleana representa duas variações. O porém que ninguém lembra é que adicionando mais de uma variável, suas variações crescem exponencialmente. Com três variáveis boleanas como no exemplo acima, temos 8 variações.</p>
<p>E aí, você acha que o código acima está preparado para lidar com 8 variações? A resposta infelizmente é: não. Seu código pode parecer simples e estar 99% vunerável a bugs.</p>
<p><img src="/images/web-development-with-state-charts-intro/image-5.jpg" alt="meme de um homem tampando a placa do carro pela metada na primeira parte da foto, e na segunda parte tampando a outra."></p>
<p>Sabendo disso, podemos fazer diferente, podemos mapear todos os estados em uma constante:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">IDLE</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">IDLE</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">EDITING</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">EDITING</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">SAVING</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">SAVING</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">ERROR</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">ERROR</span><span style="color: #ECEFF4">'</span></span>
<span class="line"><span style="color: #ECEFF4">}</span><span style="color: #81A1C1">;</span></span></code></pre>
<p>Podemos também criar um objeto que nos diga qual o estado atual e qual o próximo estado, exemplo:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">nextState</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">   </span><span style="color: #88C0D0">[</span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">IDLE</span><span style="color: #88C0D0">]</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">EDITING</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">   </span><span style="color: #88C0D0">[</span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">EDITING</span><span style="color: #88C0D0">]</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">SAVING</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">   </span><span style="color: #88C0D0">[</span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">SAVING</span><span style="color: #88C0D0">]</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #88C0D0">success</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">IDLE</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #88C0D0">error</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">ERROR</span></span>
<span class="line"><span style="color: #D8DEE9FF">   </span><span style="color: #ECEFF4">},</span></span>
<span class="line"><span style="color: #D8DEE9FF">   </span><span style="color: #88C0D0">[</span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">ERROR</span><span style="color: #88C0D0">]</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">SAVING</span></span>
<span class="line"><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">}</span></span></code></pre>
<p>Limitaremos então o estado do input para apenas UM estado por vez:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D8DEE9">inputState</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">IDLE</span></span></code></pre>
<p>E nossa função de onClick receberia apenas o nosso estado atual por parâmetro, e usando o objecto nextState, saberiamos qual o próximo estado deveríamos mover nosso componente. Exemplo:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">onClick</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">currentInputState</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">currentInputState</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">===</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">EDITING</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #88C0D0">saveName</span><span style="color: #D8DEE9FF">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">then</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">currentInputState</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">===</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">nextState</span><span style="color: #D8DEE9FF">[</span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">saving</span><span style="color: #D8DEE9FF">]</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">success</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">     </span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">catch</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">currentInputState</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">===</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">nextState</span><span style="color: #D8DEE9FF">[</span><span style="color: #D8DEE9">stateType</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">saving</span><span style="color: #D8DEE9FF">]</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">error</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">else</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">	  </span><span style="color: #D8DEE9">currentInputState</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">nextState</span><span style="color: #D8DEE9FF">[</span><span style="color: #D8DEE9">currentInputState</span><span style="color: #D8DEE9FF">]</span><span style="color: #81A1C1">;</span><span style="color: #D8DEE9FF">  </span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>Podemos resumir nossa história em problema e solução:</p>
<p><code>Problema:</code></p>
<p>Manter o estado usando variáveis condicionais ficou confuso, além de obrigar a tratar todos os edge cases e rezar para que o estado não caísse em possíveis combinações que não foram tratadas.</p>
<p><code>Solução:</code></p>
<p>Ter um único estado por vez e definir as transições entre estados através de um evento.</p>
<h2 class="subtitle--separator"></h2>
<p>Nossa solução tem um nome: <code>Finite State Machines</code>, mas a final oq é Finite State Machines?</p>
<blockquote>
<p>Uma Máquina de estados finita (Finite State Machines ou FSM) é um modelo matemático usado para representar programas de computadores ou circuitos lógicos. O conceito é concebido como uma máquina abstrata que deve estar em <strong>UM</strong> de um número finito de estados.</p>
</blockquote>
<p>source: <a href="https://pt.wikipedia.org/wiki/M%C3%A1quina_de_estados_finita">https://pt.wikipedia.org/wiki/Máquina_de_estados_finita</a></p>
<p>Uma forma bem simples de representar FSM é usando um diagrama de transição de estados, onde o conseguimos vizualizar todo o fluxo de transição de estados por exemplo:</p>
<p><em><strong>começando em um estado A ⇒ um vento X aconteceu ⇒ vamos para um estado B</strong></em></p>
<p><img src="/images/web-development-with-state-charts-intro/image-6.png" alt="imagem mostrando um diagrama de transição de estados"></p>
<h3 id="finite-state-machines-state-charts-que-confusão">Finite State Machines? State charts? que confusão!</h3>
<p>Quando começamos a estudar mais sobre Finete State Machines vamos sempre nos deparar com um outro nome que é <code>State Charts</code>, mas a propósito qual a grande diferença entre eles?</p>
<p>Como qualquer solução, Finite State Machines por sí só tem alguns problemas, geralmente acabam com um grande número de estados, muitos deles com transições idênticas, tornando muito verboso e de difícil manutenção. Este é o famoso problema conhecido como explosão de estados.</p>
<p>State Charts por sua vez, apareceu pouco tempo depois adicionando soluções para que FSM fossem mais escalável a medida que o seu sistema fosse crescendo e ficando mais complexo. Além de novas ideias para tornar sua vida mais fácil.</p>
<p><img src="/images/web-development-with-state-charts-intro/image-7.png" alt="imagem mostrando alguns dos conceitos que state charts contém, como activity, actions, paralel states entre outros..."></p>
<p>Vale lembrar que a ideia foi apresentada há mais de 20 anos atrás, além de ser uma das bases da computação, é usada largamente em hardware embarcados e games! Com o aparecimento da lib Xstate que vamos descobrir no próximo post, o uso na web e pricipalmente usando Javascript está crescendo cada vez mais. Apenas para deixar um gostinho do que vamos ver no próximo artigo e também sobre uma das maiores vantagens de se usar State Charts que é o poder de vizualizar seu código, dá uma olhada como ficaria nosso codigo do componente de input usando Xstate:</p>
<p><a href="https://xstate.js.org/viz/?gist=d73e129d583ac4a0ba956736e68dbdd2">https://xstate.js.org/viz/?gist=d73e129d583ac4a0ba956736e68dbdd2</a></p>
<p>Não se preocupe se não entendeu o código, vamos aprender tudo sobre o uso de Xstate e State Charts em uma aplicação real no próximo artigo!</p>
<h3 id="estado-é-tipo-redux">Estado? É tipo redux?</h3>
<p>Quando trabalhamos com State Charts, os famosos estados não são os estados dinâmicos ou relacionados a dados de uma aplicação e sim em qual cenário de uma possibilidade finita e pré estabelecida uma aplicação está, lembre-se da regra de ouro, uma aplicação pode estar em UM único estado por vez. Exemplo:</p>
<p>Sua aplicação pode estar no estado de loading e ter um contexto <code>user=null</code>, em uma próximo momento sua aplicação estaria em um estado de logado e ter um contexto <code>user={ id: 1, name:  'Diel' }</code>. Com esse exemplo fica fácil assimilar que o estado como estamos acostumados no Redux ou outras opções são chamados de contexto no mundo dos statecharts.</p>
<p>Te vejo no próximo post, onde vamos aprender a como modelar uma aplicação utilizando State Charts e Xstate.</p></article><!-- Article Footer --><footer class="mt-16 pt-10 border-t border-ivory-300 dark:border-ink-700"><!-- Author card --><div class="flex items-center gap-5 mb-10"><div class="relative"><div class="absolute -inset-0.5 bg-gradient-to-br from-accent-400 to-accent-600 dark:from-accent-500 dark:to-accent-700 rounded-full opacity-50 blur-sm"></div><img src="/images/diel.jpeg" alt="Diel Duarte" class="relative w-14 h-14 rounded-full object-cover ring-2 ring-ivory-100 dark:ring-ink-900"></div><div><p class="font-display font-semibold text-ink-800 dark:text-ivory-100">Diel Duarte</p><p class="text-sm text-ink-400 dark:text-ivory-400">Principal Engineer at Appcues</p></div></div><!-- Back to home --><a href="/pt-br/" class="inline-flex items-center gap-3 px-5 py-2.5 border border-ink-200 dark:border-ink-700 text-ink-600 dark:text-ivory-300 hover:bg-ink-800 hover:text-ivory-100 dark:hover:bg-ivory-100 dark:hover:text-ink-800 rounded-lg transition-colors duration-200 text-sm font-medium"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>Voltar para artigos</a></footer></div></body></html>