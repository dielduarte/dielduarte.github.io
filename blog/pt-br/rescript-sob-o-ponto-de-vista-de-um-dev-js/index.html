<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Crimson+Pro:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap" rel="stylesheet"><title>Rescript sob o ponto de vista de um dev JS</title><link rel="canonical" href="https://dielduarte.dev/blog/pt-br/rescript-sob-o-ponto-de-vista-de-um-dev-js/"><meta name="description" content="Algumas opini√µes sobre a linguagem Rescript."><meta name="robots" content="index, follow"><meta property="og:title" content="Rescript sob o ponto de vista de um dev JS"><meta property="og:type" content="article"><meta property="og:image" content="https://dielduarte.dev/images/pt-br-rescript-sob-o-ponto-de-vista-de-um-dev-js.png"><meta property="og:url" content="https://dielduarte.dev/blog/pt-br/rescript-sob-o-ponto-de-vista-de-um-dev-js/"><meta content="https://dielduarte.dev/images/pt-br-rescript-sob-o-ponto-de-vista-de-um-dev-js.png" name="twitter:image"><meta content="Rescript sob o ponto de vista de um dev JS" name="twitter:title"><meta content="@diel_duarte" name="twitter:site"><meta content="summary_large_image" name="twitter:card"><meta content="Algumas opini√µes sobre a linguagem Rescript." name="twitter:description"><link rel="stylesheet" href="/lang.7b5abac6.css" />
<style type="text/css">html{scroll-behavior:smooth}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.noise-overlay:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;opacity:.025;pointer-events:none;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");z-index:100}.prose-article{font-family:Crimson Pro,Georgia,serif;font-size:1.25rem;line-height:1.75;color:#3d3d3b}@media (prefers-color-scheme: dark){.prose-article{color:#e0e0e0}}.prose-article p{margin:1.75rem 0}.prose-article strong{color:#1f1f1d;font-weight:600}@media (prefers-color-scheme: dark){.prose-article strong{color:#fafaf8}}.prose-article a{color:#7d6e5e;text-decoration:none;background-image:linear-gradient(currentColor,currentColor);background-size:0% 1px;background-position:0 100%;background-repeat:no-repeat;transition:background-size .3s ease}@media (prefers-color-scheme: dark){.prose-article a{color:#b8a99a}}.prose-article a:hover{background-size:100% 1px}.prose-article h2{font-family:Plus Jakarta Sans,sans-serif;font-size:1.75rem;font-weight:700;color:#171715;margin:3rem 0 1.5rem;letter-spacing:-.02em}@media (prefers-color-scheme: dark){.prose-article h2{color:#fafaf8}}.prose-article h3{font-family:Plus Jakarta Sans,sans-serif;font-size:1.375rem;font-weight:600;color:#1f1f1d;margin:2.5rem 0 1rem}@media (prefers-color-scheme: dark){.prose-article h3{color:#f5f5f2}}.prose-article h4{font-family:Plus Jakarta Sans,sans-serif;font-size:1.125rem;font-weight:600;color:#1f1f1d;margin:2rem 0 .75rem}@media (prefers-color-scheme: dark){.prose-article h4{color:#f5f5f2}}.prose-article pre{font-family:JetBrains Mono,monospace;font-size:.9rem;padding:1.5rem;border-radius:8px;margin:2rem 0;overflow-x:auto;background:#171715!important;border:1px solid #2A2A28}.prose-article code{font-family:JetBrains Mono,monospace;font-size:.875em}.prose-article :not(pre)>code{background:rgba(125,110,94,.1);color:#635850;padding:.2em .4em;border-radius:4px}@media (prefers-color-scheme: dark){.prose-article :not(pre)>code{background:rgba(184,169,154,.15);color:#b8a99a}}.prose-article ul,.prose-article ol{margin:1.5rem 0;padding-left:0;list-style:none}.prose-article ul li,.prose-article ol li{position:relative;padding-left:1.75rem;margin-bottom:.75rem}.prose-article ul li:before{content:"";position:absolute;left:0;top:.75em;width:5px;height:5px;background:#7D6E5E;border-radius:50%}@media (prefers-color-scheme: dark){.prose-article ul li:before{background:#9A8B7A}}.prose-article ol{counter-reset:list-counter}.prose-article ol li{counter-increment:list-counter}.prose-article ol li:before{content:counter(list-counter);position:absolute;left:0;font-family:Plus Jakarta Sans,sans-serif;font-weight:600;font-size:.875rem;color:#7d6e5e}@media (prefers-color-scheme: dark){.prose-article ol li:before{color:#9a8b7a}}.prose-article blockquote{margin:2.5rem 0;padding:1.5rem 2rem;background:rgba(125,110,94,.05);border-left:3px solid #9A8B7A;border-radius:0 8px 8px 0;font-style:italic}@media (prefers-color-scheme: dark){.prose-article blockquote{background:rgba(184,169,154,.05);border-left-color:#7d6e5e}}.prose-article blockquote p{margin:0;color:#5c5c5a}@media (prefers-color-scheme: dark){.prose-article blockquote p{color:#b8b8b5}}.prose-article img,.prose-article video{max-width:100%;border-radius:8px;margin:2.5rem auto;display:block}.prose-article hr{border:none;height:1px;background:linear-gradient(90deg,transparent,#DCDCD7,transparent);margin:3rem 0}@media (prefers-color-scheme: dark){.prose-article hr{background:linear-gradient(90deg,transparent,#2A2A28,transparent)}}.reading-progress{position:fixed;top:0;left:0;height:2px;background:#7D6E5E;z-index:1000;transition:width .1s ease-out}@media (prefers-color-scheme: dark){.reading-progress{background:#9A8B7A}}
</style><script type="module" src="/_astro/hoisted.00e308b0.js"></script></head><body class="noise-overlay bg-ivory-100 dark:bg-ink-900 min-h-screen transition-colors duration-300"><!-- Reading progress bar --><div class="reading-progress" id="progress-bar" style="width: 0%"></div><div class="max-w-3xl mx-auto px-6 md:px-8 py-12 md:py-20"><!-- Back navigation --><nav class="mb-12"><a href="/pt-br/" class="inline-flex items-center gap-2 text-sm text-ink-400 dark:text-ivory-400 hover:text-ink-700 dark:hover:text-ivory-100 transition-colors duration-200 group"><svg class="w-4 h-4 transform group-hover:-translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>Voltar para artigos</a></nav><!-- Article Header --><header class="mb-12 md:mb-16"><!-- Meta info --><div class="flex flex-wrap items-center gap-4 mb-6"><time datetime="2021-04-27" class="text-sm font-mono text-accent-500 dark:text-accent-400">April 26, 2021</time><span class="text-ink-300 dark:text-ink-600">¬∑</span><span class="text-sm text-ink-400 dark:text-ivory-400 font-mono">14 min de leitura</span></div><!-- Title --><h1 class="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-ink-800 dark:text-ivory-100 leading-tight tracking-tight mb-6">Rescript sob o ponto de vista de um dev JS</h1><!-- Description --><p class="text-lg md:text-xl text-ink-500 dark:text-ivory-300 leading-relaxed">Algumas opini√µes sobre a linguagem Rescript.</p><!-- Decorative divider --><div class="mt-10 flex items-center gap-3"><div class="w-12 h-px bg-accent-400 dark:bg-accent-500"></div><div class="w-1.5 h-1.5 bg-accent-400 dark:bg-accent-500 rounded-full"></div></div></header><!-- Article Content --><article class="prose-article"><p>Voc√™s sabem que eu gosto muito de estudar sobre novas linguagens, gosto de estudar sobre compiladores e mais. As duas √∫ltimas linguagens que venho estudando s√£o go (obrigado <a href="https://github.com/guilhermehubner">Guilherme</a> por me influenciar a usar Go em um projeto paralelo que fazemos juntos, um dos melhores engenheiros que conhe√ßo üíú) e Rescript. Voc√™s tamb√©m sabem que ganho dinheiro como desenvolvedor Javascript/front-end e eu amo isso, mesmo com todos os problemas que temos em Javascript continua uma √≥tima linguagem, flex√≠vel e f√°cil para um iniciante usar e para um desenvolvedor avan√ßado continuar usando e gostando. A linguagem tamb√©m √© flex√≠vel o suficiente para rodar em qualquer lugar, Web, Desktop, Mobile, Hardware, voc√™ escolhe! A comunidade √© muito ativa, nesse momento provavelmente temos algumas centenas de libs novas no NPM dispon√≠vel.</p>
<p>Essa √© uma apresenta√ß√£o e um artigo juntos, apenas explicando alguns dos pontos que eu considerei importante para dizer: "quer saber? vale a pena aprender Rescript e usar no dia a dia.". Esse n√£o √© um artigo para dizer que eu odeio Typescript, simplesmente porque eu n√£o odeio typescript. Eu venho trabalhando com Typescript nos √∫ltimos dois anos e gosto muito, mas o fato de gostar n√£o me impede de ver que TS tem seus problemas e muito o que melhorar como qualquer outra linguagem no mundo.</p>
<p>No final, tudo que eu quero √© me sentir produtivo usando algo para resolver problemas, mas os problemas certos. Eu quero me sentir confort√°vel em refatorar uma grande quantidade de c√≥digo e se o compilador compilou com sucesso tudo vai estar certo, de verdade. Eu quero escrever mais e fazer menos porque eu sei que o compilador n√£o vai deixar algu√©m usar as fun√ß√µes escritas da maneira errada, uma melhor infer√™ncia. Eu quero que isso seja r√°pido, t√£o r√°pido que eu vou salvar o arquivo duas vezes s√≥ pra ter certeza que funcionou ao inv√©z de abrir uma nova aba do twitter, Rescript.</p>
<p>Essa foi a maior introdu√ß√£o que eu j√° fiz, o que mostra o qu√£o interessado eu estou. Daqui pra baixo vou falar sobre os pontos que me chamaram a aten√ß√£o sobre Rescript para come√ßar a aprender mais sobre a linguagem. N√£o significa que eu estou certo, apenas opin√µes.</p>
<h2 class="subtitle--separator">Integra√ß√£o com JavaScript</h2>
<p>Aqui vai uma ideia para voc√™: Javascript √© a linguagem da web! JavaScript est√£ em todos os lugares! Sempre aposte no JavaScript! Mesmo que voc√™ n√£o goste disso, √© a verdade. Ent√£o, um dos primeiros pontos que eu olhei foi o qu√£o f√°cil seria usar algum c√≥digo ou lib JavaScript sem precisar reescrever isso para Rescript.</p>
<p>E por qu√™? Porque eu n√£o quero parar de usar JavaScript. Se alguma Tec nova super legal como Xstate surgir ou uma nova API no Browser, eu quero ser capaz de usar no meu c√≥digo Rescript de alguma forma, mesmo se a linguagem n√£o tem suporte oficial para isso ainda. Isso precisa ser f√°cil e r√°pido de criar se precisar.</p>
<p>Vamos supor que eu queira usar Lodash, esperando por coment√°rios: "voc√™ n√£o precisar usar lodash, bla bla bla..." Eu aposto que Lodash j√° salvou sua vida muitas vezes e √© s√≥ um exemplo. Continuando, tudo que voc√™ precisaria fazer seria definir um arquivo de bindings muito similar com o que fariamos em Typescript, por exemplo:</p>
<p>N√≥s criamos um arquivo <code>Lodash.res</code>:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D08770">@</span><span style="color: #8FBCBB">module</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">lodash/chunk</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9">external</span><span style="color: #D8DEE9FF"> chunk</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> (</span><span style="color: #D8DEE9">array</span><span style="color: #81A1C1">&#x3C;</span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">a>, int) => array&#x3C;array&#x3C;</span><span style="color: #ECEFF4">'</span><span style="color: #D8DEE9">a</span><span style="color: #81A1C1">>></span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">default</span><span style="color: #ECEFF4">"</span></span></code></pre>
<p>E ent√£o em algum outro arquivo, usariamos o m√≥dulo Lodash:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">myArray</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> [</span><span style="color: #B48EAD">1</span><span style="color: #ECEFF4">,</span><span style="color: #B48EAD">2</span><span style="color: #ECEFF4">,</span><span style="color: #B48EAD">3</span><span style="color: #D8DEE9FF">]</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">chunks</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Lodash</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">chunk</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">myArray</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span></span></code></pre>
<p>Voc√™ tamb√©m pode exportar muitas fun√ß√µes do mesmo m√≥dulo, voltando ao nosso arquivo <code>Lodash.res</code>:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D08770">@</span><span style="color: #8FBCBB">module</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">lodash</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9">external</span><span style="color: #D8DEE9FF"> chunk</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> (</span><span style="color: #D8DEE9">array</span><span style="color: #81A1C1">&#x3C;</span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">a>, int) => array&#x3C;array&#x3C;</span><span style="color: #ECEFF4">'</span><span style="color: #D8DEE9">a</span><span style="color: #81A1C1">>></span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">chunk</span><span style="color: #ECEFF4">"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">@</span><span style="color: #8FBCBB">module</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">lodash</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9">external</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">difference</span><span style="color: #D8DEE9FF">: </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">array</span><span style="color: #D8DEE9FF">&#x3C;</span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">a>, array&#x3C;</span><span style="color: #ECEFF4">'</span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF">></span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">array</span><span style="color: #81A1C1">&#x3C;</span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">a> = "difference</span><span style="color: #D8DEE9">"</span></span></code></pre>
<p>E usar da mesma forma:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">myArray</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> [</span><span style="color: #B48EAD">1</span><span style="color: #ECEFF4">,</span><span style="color: #B48EAD">2</span><span style="color: #ECEFF4">,</span><span style="color: #B48EAD">3</span><span style="color: #D8DEE9FF">]</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">chunks</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Lodash</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">chunk</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">myArray</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">difference</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Lodash</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">difference</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">myArray</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> [</span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">])</span></span></code></pre>
<h2>Output leg√≠vel</h2>
<p>O c√≥digo gerado pelo compilador do Rescript √© leg√≠vel para humanos, limpo e m√≠nimo. O que faz o tamanho do nosso bundle ser bem similar como se fosse alguma pessoa escrevendo o Javascript. Veja o examplo do c√≥digo acima gerado pelo compilador:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #616E88">// Generated by ReScript, PLEASE EDIT WITH CARE</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">import</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">*</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">as</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">Lodash</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">from</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">lodash</span><span style="color: #ECEFF4">"</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">myArray</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> [</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">1</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">2</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">3</span></span>
<span class="line"><span style="color: #D8DEE9FF">]</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">chunks</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Lodash</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">chunk</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">myArray</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">difference</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Lodash</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">difference</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">myArray</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> [</span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">])</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">export</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #8FBCBB">myArray</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #8FBCBB">chunks</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #8FBCBB">difference</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #616E88">/* chunks Not a pure module */</span></span></code></pre>
<h2>√â Rescript ou JavaScript?</h2>
<p>Outro ponto importante √© sobre a syntax, que √© muito parecida com JavaScript. Rescript √© outra linguagem diferente do Typescript que √© feito baseado em JavaScript, ent√£o ter uma syntax parecida √© muito bom para aprender r√°pido e ser produtivo com a linguagem de forma r√°pida. Para prover esse ponto, vamos fazer um exerc√≠cio chamado: "√â Rescript ou JavaScript?"</p>
<p><strong>√â Rescript ou JavaScript?</strong></p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">person</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">age</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">5</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">name</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Big ReScript</span><span style="color: #ECEFF4">"</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p><code>Rescript!</code></p>
<p><strong>√â Rescript ou JavaScript?</strong></p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">a</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">+</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">addTwo</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF">(</span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">test</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">addTwo</span><span style="color: #D8DEE9FF">(</span><span style="color: #B48EAD">10</span><span style="color: #D8DEE9FF">) </span><span style="color: #616E88">// 12</span></span></code></pre>
<p><code>Rescript!</code> JS n√£o √© curried por default, mais sobre isso abaixo.</p>
<p><strong>√â Rescript ou JavaScript?</strong></p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">myArray</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> [</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">hello</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">world</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">how are you</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">firstItem</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">myArray</span><span style="color: #D8DEE9FF">[</span><span style="color: #B48EAD">0</span><span style="color: #D8DEE9FF">] </span><span style="color: #616E88">// "hello"</span></span></code></pre>
<p><code>Rescript!</code></p>
<p>De fato, quase todos os exemplos funcionariam nos dois mundos. A diferen√ßa √© que com Rescript n√≥s teriamos a ajuda do compilar com uma infer√™ncia de tipos maravilhosa para nos ajudar a escrever um c√≥digo melhor e mais seguro, isso sem nem precisar escrever nenhum tipo at√© agora.</p>
<p>Claro que existem algumas diferen√ßas tanto de syntax como de como a linguagem funciona, mas s√£o t√£o pequenas que √© apenas saber que elas existem. Por exemplo, ifs:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">showMenu</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">showMenu</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #88C0D0">displayMenu</span><span style="color: #D8DEE9FF">()</span></span>
<span class="line"><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">else</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">nothing here...</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>N√≥s n√£o precisamos usar parenteses em Rescript.</p>
<h2>Sem Imports</h2>
<p>Diferente de JS, n√£o existe export e import em Rescript. O que acontece √© que em Rescript todos os arquivos s√£o um modulo e o nome do arquivo precisa ser √∫nico, mesmo arquivos dentro de pastas s√£o acessados de forma global no mesmo n√≠vel que qualquer outro arquivo. Voc√™ s√≥ precisa usar o NomeDoArquivo que precisa ser em CamelCase ponto o tipo/fun√ß√£o que voc√™ quer usar.</p>
<p>N√≥s tamb√©m podemos usar <code>open</code> e ao inv√©z de usar <strong>NomeDoModule.AlgumaCoisa</strong> todas as vezes, n√≥s fariamos:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D8DEE9">open</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Lodash</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">myArray</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> [</span><span style="color: #B48EAD">1</span><span style="color: #ECEFF4">,</span><span style="color: #B48EAD">2</span><span style="color: #ECEFF4">,</span><span style="color: #B48EAD">3</span><span style="color: #D8DEE9FF">]</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">chunks</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">chunk</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">myArray</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span></span></code></pre>
<p>N√£o ter imports/exports e ter um sistema de m√≥dulos por arquivo, nos for√ßa a manter uma estrutura mais flat que tem grandes vantagens a longo prazo.</p>
<p>Trecho tirado da documenta√ß√£o do Rescript:</p>
<blockquote>
<p>By default, every file's type declaration, binding and module is exported, aka publicly usable by another file. This also means those values, once compiled into JS, are immediately usable by your JS code.</p>
</blockquote>
<h2>Sistema de Tipos</h2>
<p>Bom eu poderia escrever alguma coisa com as minhas palavras, mas o time do Rescript fez um trabalho t√£o bom no site da documenta√ß√£o que eu vou apenas colar aqui o trecho sobre tipos:</p>
<blockquote>
<p>Types are the highlight of ReScript! They are:</p>
<p>Strong. A type can't change into another type. In JavaScript, your variable's type might change when the code runs (aka at runtime). E.g. a number variable might change into a string sometimes. This is an anti-feature; it makes the code much harder to understand when reading or debugging.</p>
<p>Static. ReScript types are erased after compilation and don't exist at runtime. Never worry about your types dragging down performance. You don't need type info during runtime; we report all the information (especially all the type errors) during compile time. Catch the bugs earlier!</p>
<p>Sound. This is our biggest differentiator versus many other typed languages that compile to JavaScript. Our type system is guaranteed to never be wrong. Most type systems make a guess at the type of a value and show you a type in your editor that's sometime incorrect. We don't do that. We believe that a type system that is sometime incorrect can end up being dangerous due to expectation mismatches.</p>
<p>Fast. Many developers underestimate how much of their project's build time goes into type checking. Our type checker is one of the fastest around.</p>
<p>Inferred. You don't have to write down the types! ReScript can deduce them from their values. Yes, it might seem magical that we can deduce all of your program's types, without incorrectness, without your manual annotation, and do so quickly. Welcome to ReScript =).</p>
</blockquote>
<p>Vamos explorar um pouco mais essa ideia de infer√™ncia, que √© uma das partes mais legais do Rescript. Escreva menos e fa√ßa mais!</p>
<p>Vamos considerar a seguinte fun√ß√£o:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">a</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">+</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span></span></code></pre>
<p>Veja o que o compilador diria se voc√™ tentasse usar essa fun√ß√£o passando duas strings ao inv√©z de numeros:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D8DEE9">We</span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">ve found a bug for you</span><span style="color: #D8DEE9">!</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">Users</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">dielduarte</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">localhost</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">testing</span><span style="color: #81A1C1">-</span><span style="color: #D8DEE9">rescript</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">src</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">ExternalLibs</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">res</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">3</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">5</span><span style="color: #81A1C1">-</span><span style="color: #B48EAD">8</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">1</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">a</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">+</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF"> ‚îÇ</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">3</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">11</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">2</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">This</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">has</span><span style="color: #D8DEE9FF"> type</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">string</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">Somewhere</span><span style="color: #D8DEE9FF"> wanted</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">int</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">You</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">can</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">convert</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">string</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">to</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">int</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">with</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Belt</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">Int</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">fromString</span><span style="color: #ECEFF4">.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">FAILED</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">cannot</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">make</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">progress</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">due</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">to</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">previous</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">errors</span><span style="color: #ECEFF4">.</span></span>
<span class="line"><span style="color: #81A1C1">>>>></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Finish</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">compiling</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">exit</span><span style="color: #D8DEE9FF">: </span><span style="color: #B48EAD">1</span><span style="color: #D8DEE9FF">)</span></span></code></pre>
<p>Isso √© como o compilador do TS deveria funcionar üòÖ com Rescript eu sinto que estou a todo momento programando com um colega do lado. O compilador me mostra o erro, porqu√™, e ainda como resolver o problema e repare novamente, n√≥s n√£o tivemos que escrever nenhum tipo at√© ent√£o.</p>
<p>Mas como isso √© poss√≠vel? Bom, em Rescript usando o sinal <code>+</code> s√≥ √© valido para numeros, ent√£o o compilador infere que por default a fun√ß√£o Add s√≥ funciona para numeros. If voc√™ quisesse concatenar strings, teria que usar <code>++</code>.</p>
<h2>Variants</h2>
<p>A maioria das estruturas de dados em linguagens de program√ß√£o s√£o sobre "isso e aquilo". Variants nos permite expressar "isso ou aquilo".</p>
<p>Varians no primeiro olhar, se parecem com Enum com superpoderes.</p>
<p>Um exemplo simples seria:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> myResponse </span><span style="color: #81A1C1">=</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> Yes</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> No</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> PrettyMuch</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">areYouCrushingIt</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Yes</span></span>
<span class="line"></span></code></pre>
<p>Ol√° enums, meu velho amigo.</p>
<p>Mas agora vem os super poderes, uma variant pode conter argumentos separado por uma virgula. Exemplo:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> account </span><span style="color: #81A1C1">=</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> None</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> Instagram(</span><span style="color: #81A1C1">string</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> Facebook</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">string</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">int</span><span style="color: #ECEFF4">)</span></span></code></pre>
<p>Ent√£o, para o mesmo tipo voc√™ poderia usar:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">myAccount</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Facebook</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Josh</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">26</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">friendAccount</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Instagram</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Jenny</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span></code></pre>
<p>Variants tamb√©m podem receber um Record (objeto):</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> user </span><span style="color: #81A1C1">=</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> Number(int)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> Id(</span><span style="color: #ECEFF4">{</span><span style="color: #D8DEE9FF">name</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">string</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> password</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">string</span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">me</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Id</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">name</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Joe</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">password</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">123</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span></code></pre>
<p><code>me</code> continua sendo do tipo user, mas uma variant diferente. Usar pattern matching + variants √© uma t√©cnica muito poderosa, e pode at√© evitar algumas issues de performance como voc√™ pode ver <a href="https://rescript-lang.org/docs/manual/latest/variant#design-decisions">aqui</a> onde n√≥s conseguimos reduzir a complexidade do nosso programa de O(n) para O(1).</p>
<h2>Pattern matching</h2>
<p>Se variants s√£o enums com super poderes, pattern matching √© o switch com super poderes. Misturar os dois √© ü§Ø</p>
<p>N√≥s podemos usar pattern matching para testar varia√ß√µes de qualquer tipo de formas diferentes, o exemplo abaixo est√£ testando se temos um <code>Number(id)</code> ou um <code>Id({ name: Jow"" })</code> um Id com o nome exatamente igual a Joe ou qualquer <code>Id(options)</code></p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> user </span><span style="color: #81A1C1">=</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> Number(int)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> Id(</span><span style="color: #ECEFF4">{</span><span style="color: #D8DEE9FF">name</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">string</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> password</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">string</span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">me</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Id</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">name</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Joe</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">password</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">123</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">switch</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">me</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Number</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">id</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Your id is => </span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">++</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">Int</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">toString</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">id</span><span style="color: #D8DEE9FF">))</span></span>
<span class="line"><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Id</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">name</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Joe</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Welcome Joe!</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Id</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">option</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Welcome =></span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">++</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">option</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">name</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>Pattern matching podem ser usados para testar qualquer tipo, listas, arrays, tuplas, variants e mais. E como se isso n√£o fosse o suficiente, pattern matching tamb√©m √© exaustivo. Isso significa que todas as vezes que voc√™ estiver testando uma variav√©l, o compilador te obriga a testar todos os padr√µes que aquela vari√°vel pode ter, e se por acaso voc√™ esquecer disso, o compilador te lembra. Vamos supor que eu esqueci de tratar a variant <code>Id</code> no exemplo acima, o compilador me mostraria o seguinte erro:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #D8DEE9">Warning</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">number</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">8</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">Users</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">dielduarte</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">localhost</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">test</span><span style="color: #81A1C1">-</span><span style="color: #D8DEE9">rescript</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">src</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">ExternalLibs</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">res</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">7</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">1</span><span style="color: #81A1C1">-</span><span style="color: #B48EAD">9</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">5</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">me</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Id</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">name</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Joe</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">password</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">123</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">6</span><span style="color: #D8DEE9FF"> ‚îÇ</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">7</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #81A1C1">switch</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">me</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">8</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Number</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">id</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Your id is => </span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">++</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">Int</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">toString</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">id</span><span style="color: #D8DEE9FF">))</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">9</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">You</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">forgot</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">to</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">handle</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">possible</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">case</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">here</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">for</span><span style="color: #D8DEE9FF"> example</span><span style="color: #ECEFF4">:</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">Id</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">_</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">>>>></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Finish</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">compiling</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">128</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">mseconds</span></span></code></pre>
<h2>Curried por default</h2>
Essa √© uma das curiosidades sobre Rescript que eu mais curti. Todas as fun√ß√µes em Rescript s√£o curried por default, isso significa que, n√≥s podemos usar partial application sempre que for necess√°rio escrevendo menos c√≥digo para isso.
<p>Em Javascript, para criar o exemplo que usamos acima n√≥s precisariamos usar closures ou algum helper tipo <a href="https://lodash.com/docs/4.17.15#curry">Lodash curry</a>:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">a</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">b</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">+</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span><span style="color: #D8DEE9FF"> </span><span style="color: #616E88">//closure</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">addTwo</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF">(</span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">test</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">addTwo</span><span style="color: #D8DEE9FF">(</span><span style="color: #B48EAD">10</span><span style="color: #D8DEE9FF">) </span><span style="color: #616E88">// 12</span></span></code></pre>
<p>Em Rescript n√≥s escreveriamos a fun√ß√£o da mesma forma mas usuarimos de forma parcial:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">a</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">+</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">addTwo</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF">(</span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">test</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">addTwo</span><span style="color: #D8DEE9FF">(</span><span style="color: #B48EAD">10</span><span style="color: #D8DEE9FF">) </span><span style="color: #616E88">// 12</span></span></code></pre>
<h2>Labeled arguments</h2>
<p>Em Javascript/Typescript n√≥s estamos acostumados a usar um objeto como argumento para saber quais os nomes dos argumentos quando usando a fun√ß√£o sem precisar ir para a defini√ß√£o da mesma e tamb√©m, para poder passar os argumentos em qualquer ordem, exemplo:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">updateUser</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">userOptions</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">...</span><span style="color: #ECEFF4">.</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">//using the function</span></span>
<span class="line"><span style="color: #88C0D0">updateUser</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #88C0D0">name</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">Diel</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #88C0D0">age</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">26</span></span>
<span class="line"><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span></code></pre>
<p>Em Rescript tamb√©m √© poss√≠vel passar um objeto, MAS, existe algo chamado "labeled arguments" que √© basicamente nomear os argumentos com um <code>~</code> na frente, dessa forma todas as vezes que usar a fun√ß√£o poderiamos passar o nome do argumento em qualquer ordem, exemplo:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">updateUser</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> (</span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">name</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">age</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">...</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">//usando a fn</span></span>
<span class="line"><span style="color: #88C0D0">updateUser</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">age</span><span style="color: #81A1C1">=</span><span style="color: #B48EAD">26</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">name</span><span style="color: #81A1C1">=</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Diel</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">) </span><span style="color: #616E88">// arqui voc√™ passar o argumento em qualquer ordem</span></span></code></pre>
<p>Lembra que todas as fun√ß√µes s√£o curried por default? Com labeled arguments n√≥s podemos usar a fun√ß√£o de forma parcial passando os argumentos em qualquer ordem, exemplo:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">add</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> (</span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">a</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">b</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">+</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">b</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">addTwoToA</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">add</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">b</span><span style="color: #81A1C1">=</span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">test</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">addTwoToA</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">~</span><span style="color: #D8DEE9">a</span><span style="color: #81A1C1">=</span><span style="color: #B48EAD">10</span><span style="color: #D8DEE9FF">)</span></span></code></pre>
<h2>Rescript n√£o tem null nem undefined</h2>
<p>Isso √© √≥timo! N√≥s n√£o precisamos nos preocupar com categoria inteira de bugs, de toda forma a ideia de ter um valor n√£o existente continua sendo muito √∫til e por isso Rescript em o Option.</p>
<p>Um Option pode ser repesentado por <code>Some(Value)</code> ou <code>None</code> variants, e todas as vezes que voc√™ utilizar uma vari√°vel do tipo Option, Rescript vai te for√ßar a tratar todas as varia√ß√µes de forma exaustiva.</p>
<p>Por exemplo, um avatar de usu√°rio √© bem poss√≠vel que seja inexistente em muitas aplica√ß√µes.</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">userAvatar</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Some</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">url...</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">switch</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">userAvatar</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">None</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">The user doesn't have an avatar, let's show initials</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Some</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">url</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">The user's avatar is </span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">++</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">url</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>E se voc√™ esquecer de tratar uma das variantes, o compilados vai te mostrar:</p>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color: #D8DEE9">Warning</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">number</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">8</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">Users</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">dielduarte</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">localhost</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">testing</span><span style="color: #81A1C1">-</span><span style="color: #D8DEE9">rescript</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">src</span><span style="color: #81A1C1">/</span><span style="color: #D8DEE9">ExternalLibs</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">res</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">3</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">1</span><span style="color: #81A1C1">-</span><span style="color: #B48EAD">5</span><span style="color: #D8DEE9FF">:</span><span style="color: #B48EAD">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">1</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">userAvatar</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Some</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">url...</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">2</span><span style="color: #D8DEE9FF"> ‚îÇ</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">3</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #81A1C1">switch</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">userAvatar</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">4</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #81A1C1">|</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Some</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">url</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">=></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Js</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">The user's avatar is </span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">++</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">url</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #B48EAD">5</span><span style="color: #D8DEE9FF"> ‚îÇ </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">You</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">forgot</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">to</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">handle</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">a</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">possible</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">case</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">here</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">for</span><span style="color: #D8DEE9FF"> example</span><span style="color: #ECEFF4">:</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">None</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">>>>></span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Finish</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">compiling</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">82</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">mseconds</span></span></code></pre>
<p>üòç As vezes eu queria dar um beijo no compilador.</p>
<h2>F√°cil de usar com qualquer ferramenta do ecosistema JS</h2>
<p>Como Rescript compila para JS, voc√™ pode usar Rescript com qualquer ferramenta que funciona para JS, create-react-app, snowpack, Webpack, Babel, Rome, e mais...Qualquer coisa que funcione para JS vai funcionar em Rescript, porqu√™ a ideia √©:</p>
<p>Rescript compila para JS => e ent√£o qualquer ferramenta entende os arquivos JS gerados e simplesmente funciona! As ferramentas n√£o necessariamente precisam saber que voc√™ est√° usando Rescript. Para provar isso, eu criei esse template para usar Rescript com o Snowpack. Voc√™ pode acessar o c√≥digo aqui:</p>
<p><a href="https://github.com/dielduarte/react-snowpack-rescript-template">dielduarte/react-snowpack-rescript-template</a></p>
<p>Voc√™ pode ver que para inicializar o server do snowpack, eu importei o arquivo index.bs.js gerado pelo Rescript dentro do index.html <a href="https://github.com/dielduarte/react-snowpack-rescript-template/blob/main/index.html#L13">here</a></p>
<h2>Conclus√£o</h2>
<p>Como eu disse no come√ßo do post, a ideia aqui foi falar sobre alguns pontos que eu achei interessante para come√ßar a estudar mais sobre Rescript. Ent√£o eu n√£o falei de muitas coisas sobre a linguagem e suas vantagens, mesmo assim, eu espero que esse artigo te ajude a ter mais interesse em aprender mais sobre Rescript.</p>
<p>E para voc√™, vale a pena estudar Rescript?</p></article><!-- Article Footer --><footer class="mt-16 pt-10 border-t border-ivory-300 dark:border-ink-700"><!-- Author card --><div class="flex items-center gap-5 mb-10"><div class="relative"><div class="absolute -inset-0.5 bg-gradient-to-br from-accent-400 to-accent-600 dark:from-accent-500 dark:to-accent-700 rounded-full opacity-50 blur-sm"></div><img src="/images/diel.jpeg" alt="Diel Duarte" class="relative w-14 h-14 rounded-full object-cover ring-2 ring-ivory-100 dark:ring-ink-900"></div><div><p class="font-display font-semibold text-ink-800 dark:text-ivory-100">Diel Duarte</p><p class="text-sm text-ink-400 dark:text-ivory-400">Principal Engineer at Appcues</p></div></div><!-- Back to home --><a href="/pt-br/" class="inline-flex items-center gap-3 px-5 py-2.5 border border-ink-200 dark:border-ink-700 text-ink-600 dark:text-ivory-300 hover:bg-ink-800 hover:text-ivory-100 dark:hover:bg-ivory-100 dark:hover:text-ink-800 rounded-lg transition-colors duration-200 text-sm font-medium"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>Voltar para artigos</a></footer></div></body></html>